@model EnglishLearning.Models.RegisterViewModel

@{
    ViewData["Title"] = "Đăng nhập";
    Layout = "~/Views/Shared/TopFoot.cshtml";
}

<div class="container min-vh-100 d-flex align-items-center justify-content-center py-5">
    <div class="card glass-effect rounded-4 p-5 shadow card-hover" style="max-width: 500px; width: 100%;">
        <h3 class="card-title text-center mb-4 fs-3 fw-bold text-dark">Đăng nhập</h3>
        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger text-center mb-4" role="alert">@ViewBag.Error</div>
        }
        <form asp-action="Login" method="post" class="row g-4">
            @if (ViewBag.ReturnUrl != null)
            {
                <input type="hidden" name="returnUrl" value="@ViewBag.ReturnUrl" />
            }
            <div class="col-12">
                <label for="username" class="form-label fs-6 text-dark fw-medium">Tên đăng nhập</label>
                <input type="text" name="username" id="username" class="form-control rounded-pill input-glow py-3 fs-6" placeholder="Nhập tên đăng nhập" required />
            </div>
            <div class="col-12">
                <label for="password" class="form-label fs-6 text-dark fw-medium">Mật khẩu</label>
                <div class="position-relative">
                    <input type="password" name="password" id="password" class="form-control rounded-pill input-glow py-3 fs-6" placeholder="Nhập mật khẩu" required />
                    <button style="border:none;background-color:transparent;" type="button" onclick="togglePassword('password')" class="position-absolute end-0 top-50 translate-middle-y me-3 text-muted hover-text-dark transition-colors">👁️</button>
                </div>
            </div>
            <div class="col-12">
                <button type="submit" class="btn btn-primary w-100">Đăng nhập</button>
            </div>
            <div class="col-12 text-center mt-3">
                <p class="text-muted small">
                    Bạn chưa có tài khoản? <a href="@Url.Action("Register", "Account")" class="text-primary hover-text-primary-dark">Đăng ký ngay</a>
                </p>
                <p class="text-muted small">Hoặc đăng nhập bằng:</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="@Url.Action("GoogleLogin", "Account")" class="btn btn-outline-danger">
                        <i class="fab fa-google me-2"></i> Google
                    </a>
                    <a href="@Url.Action("FacebookLogin", "Account")" class="btn btn-outline-primary">
                        <i class="fab fa-facebook-f me-2"></i> Facebook
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <script>
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = '🙈';
            } else {
                input.type = 'password';
                button.textContent = '👁️';
            }
        }

        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('focus', function () {
                this.parentElement.classList.add('transform', 'scale-105');
            });
            input.addEventListener('blur', function () {
                this.parentElement.classList.remove('transform', 'scale-105');
            });
        });

        document.querySelectorAll('button[type="submit"]').forEach(button => {
            button.addEventListener('click', function (e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                this.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });
    </script>
    <style>
        .neon-gradient {
            background: linear-gradient(45deg, #ff006e, #8338ec, #3a86ff);
            border: none;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .input-glow {
            transition: all 0.3s ease;
        }
        .input-glow:focus {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.4);
            transform: translateY(-2px);
            border-color: #6f42c1;
        }
        .btn-hover {
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-hover:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        .btn-hover::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        .btn-hover:hover::before {
            left: 100%;
        }
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: scale(0);
            animation: ripple-animation 0.6s linear;
            pointer-events: none;
        }
        
    </style>
}